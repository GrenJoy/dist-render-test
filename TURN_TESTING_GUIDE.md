# üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é TURN —Å–µ—Ä–≤–µ—Ä–∞

## üö® **–ü–†–û–ë–õ–ï–ú–ê: TURN —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é**

### ‚ùå **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
```
INFO: session: usage: realm=<voicechat>, username=<>, rp=0, rb=0, sp=0, sb=0
```

**Realm —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚úÖ, –Ω–æ **username –ø—É—Å—Ç–æ–π** ‚ùå

## üîß **–ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**

### 1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ Render:**
```
TURN_USERNAME=voicechat
TURN_PASSWORD=—Ç–≤–æ–π_—Ä–µ–∞–ª—å–Ω—ã–π_–ø–∞—Ä–æ–ª—å
EXTERNAL_IP= (–ø—É—Å—Ç–æ)
```

### 2. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å TURN —Å–µ—Ä–≤–µ—Ä:**
- Dashboard ‚Üí TURN —Å–µ—Ä–≤–µ—Ä ‚Üí Manual Deploy
- –î–æ–∂–¥–∞—Ç—å—Å—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

### 3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å TURN —Å–µ—Ä–≤–µ—Ä:**

#### **–í–∞—Ä–∏–∞–Ω—Ç A: –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É**
1. –û—Ç–∫—Ä—ã—Ç—å `turn/test_turn.html` –≤ –±—Ä–∞—É–∑–µ—Ä–µ
2. –í–≤–µ—Å—Ç–∏:
   - TURN Server URL: `turn-dist.onrender.com`
   - Username: `voicechat`
   - Password: `—Ç–≤–æ–π_–ø–∞—Ä–æ–ª—å_–∏–∑_–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö`
3. –ù–∞–∂–∞—Ç—å "–¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å TURN —Å–µ—Ä–≤–µ—Ä"
4. –ñ–¥–∞—Ç—å 10 —Å–µ–∫—É–Ω–¥

#### **–í–∞—Ä–∏–∞–Ω—Ç B: –ß–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞**
```javascript
// –û—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –ª—é–±–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
const pc = new RTCPeerConnection({
  iceServers: [
    { urls: 'stun:stun.l.google.com:19302' },
    {
      urls: 'turn:turn-dist.onrender.com:3478',
      username: 'voicechat',
      credential: '—Ç–≤–æ–π_–ø–∞—Ä–æ–ª—å'
    }
  ]
});

pc.onicecandidate = (e) => {
  if (e.candidate) {
    console.log('ICE Candidate:', e.candidate);
    if (e.candidate.type === 'relay') {
      console.log('‚úÖ TURN —Ä–∞–±–æ—Ç–∞–µ—Ç!');
    }
  }
};

pc.createOffer().then(offer => pc.setLocalDescription(offer));
```

## üîç **–ß—Ç–æ –¥–æ–ª–∂–Ω–æ –ø—Ä–æ–∏–∑–æ–π—Ç–∏:**

### ‚úÖ **–£—Å–ø–µ—Ö:**
```
üéØ ICE Candidate: relay - IP_–ê–î–†–ï–°
‚úÖ TURN —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç! –ü–æ–ª—É—á–µ–Ω relay candidate
```

### ‚ùå **–ù–µ—É–¥–∞—á–∞:**
```
‚ùå TURN —Å–µ—Ä–≤–µ—Ä –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç –∏–ª–∏ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ credentials
```

## üöÄ **–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∞:**

1. **TURN —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç** ‚úÖ
2. **–ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø—Ä–∏–Ω–∏–º–∞–µ—Ç—Å—è** ‚úÖ
3. **–ú–æ–∂–Ω–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç** ‚úÖ

## ‚ö†Ô∏è **–ï—Å–ª–∏ —Ç–µ—Å—Ç –Ω–µ –ø—Ä–æ—Ö–æ–¥–∏—Ç:**

### **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å:**
1. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è** –≤ Render
2. **–ü–∞—Ä–æ–ª—å** - —Ç–æ—á–Ω–æ –ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π?
3. **–õ–æ–≥–∏ TURN —Å–µ—Ä–≤–µ—Ä–∞** –Ω–∞ –æ—à–∏–±–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
4. **–°–µ—Ç–µ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** - –ø–æ—Ä—Ç—ã 3478 –æ—Ç–∫—Ä—ã—Ç—ã?

### **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:**
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å
- TURN —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏–ª—Å—è
- –°–µ—Ç–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üí° **–†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**

**–£—Å–ø–µ—Ö:** TURN —Å–µ—Ä–≤–µ—Ä –≥–æ—Ç–æ–≤ –∫ —Ä–∞–±–æ—Ç–µ, –≥–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç –∑–∞—Ä–∞–±–æ—Ç–∞–µ—Ç  
**–ù–µ—É–¥–∞—á–∞:** –ù—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –∏–ª–∏ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–¢–µ—Å—Ç–∏—Ä—É–π TURN —Å–µ—Ä–≤–µ—Ä –∏ —Å–æ–æ–±—â–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç!** üß™
