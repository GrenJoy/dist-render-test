# üåê –ù–∞—Å—Ç—Ä–æ–π–∫–∞ WebRTC —Å TURN —Å–µ—Ä–≤–µ—Ä–æ–º

## üö® –ü—Ä–æ–±–ª–µ–º–∞
TURN —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ WebRTC —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ —Å–ª—ã—à–∞—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞.

## ‚úÖ –†–µ—à–µ–Ω–∏–µ

### 1. –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é TURN —Å–µ—Ä–≤–µ—Ä–∞

–í `turn/turnserver.conf` —É–±—Ä–∞—Ç—å —Å—Ç—Ä–æ–∫–∏:
```conf
# –£–ë–†–ê–¢–¨ —ç—Ç–∏ —Å—Ç—Ä–æ–∫–∏:
stun-only
no-auth
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

**–í Render –¥–ª—è TURN —Å–µ—Ä–≤–µ—Ä–∞:**
```
TURN_USERNAME=voicechat
TURN_PASSWORD=—Ç–≤–æ–π_–Ω–∞–¥–µ–∂–Ω—ã–π_–ø–∞—Ä–æ–ª—å
EXTERNAL_IP= (–æ—Å—Ç–∞–≤–∏—Ç—å –ø—É—Å—Ç—ã–º)
```

### 3. –û–±–Ω–æ–≤–∏—Ç—å frontend –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è TURN —Å–µ—Ä–≤–µ—Ä–∞

–í React –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –Ω—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å TURN —Å–µ—Ä–≤–µ—Ä –≤ WebRTC –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:

```javascript
// –í –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ WebRTC –¥–æ–±–∞–≤—å:
const configuration = {
  iceServers: [
    { urls: 'stun:stun.l.google.com:19302' },
    { 
      urls: 'turn:turn-dist.onrender.com:3478',
      username: 'voicechat',
      credential: '—Ç–≤–æ–π_–ø–∞—Ä–æ–ª—å_–∏–∑_–ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö_–æ–∫—Ä—É–∂–µ–Ω–∏—è'
    }
  ]
};
```

## üîß –ü–æ—à–∞–≥–æ–≤–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –®–∞–≥ 1: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å TURN —Å–µ—Ä–≤–µ—Ä
1. –í Render Dashboard –Ω–∞–π–¥–∏—Ç–µ TURN —Å–µ—Ä–≤–µ—Ä
2. –ù–∞–∂–º–∏—Ç–µ "Manual Deploy" –∏–ª–∏ "Redeploy"
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –¥–µ–ø–ª–æ—è

### –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ TURN —Å–µ—Ä–≤–µ—Ä–∞
–î–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏—è:
```
INFO: session: new, username=voicechat, realm=, lifetime=3600
INFO: session: bound, username=voicechat, realm=, lifetime=3600
```

### –®–∞–≥ 3: –û–±–Ω–æ–≤–∏—Ç—å frontend –∫–æ–¥
–î–æ–±–∞–≤–∏—Ç—å TURN —Å–µ—Ä–≤–µ—Ä –≤ WebRTC –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é.

### –®–∞–≥ 4: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
1. –°–æ–∑–¥–∞—Ç—å –∫–æ–º–Ω–∞—Ç—É –≤ –æ–¥–Ω–æ–º –±—Ä–∞—É–∑–µ—Ä–µ
2. –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è —Å –¥—Ä—É–≥–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–æ–ª–æ—Å–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

## üö® –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å

### –í –ª–æ–≥–∞—Ö TURN —Å–µ—Ä–≤–µ—Ä–∞:
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ—Å—Å–∏–π —Å username
- ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ allocation
- ‚ùå –ê–Ω–æ–Ω–∏–º–Ω—ã–µ —Å–µ—Å—Å–∏–∏ (no-auth)

### –í –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞:
- ‚úÖ WebRTC ICE candidates
- ‚úÖ TURN server connection
- ‚ùå WebRTC errors

### –í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –≤–∏–¥—è—Ç –¥—Ä—É–≥ –¥—Ä—É–≥–∞
- ‚úÖ –ú–∏–∫—Ä–æ—Ñ–æ–Ω –∞–∫—Ç–∏–≤–µ–Ω
- ‚úÖ –ì–æ–ª–æ—Å –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è

## üí° –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **TURN —Å–µ—Ä–≤–µ—Ä –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å —Å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π**
2. **Frontend –¥–æ–ª–∂–µ–Ω –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ credentials**
3. **–ü–æ—Ä—Ç—ã 3478 (TCP/UDP) –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ—Ç–∫—Ä—ã—Ç—ã**
4. **HTTPS –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω –¥–ª—è WebRTC**

## üîç Troubleshooting

### –ï—Å–ª–∏ TURN —Å–µ—Ä–≤–µ—Ä –Ω–µ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:
1. –ü—Ä–æ–≤–µ—Ä—å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏
3. –£–±–µ–¥–∏—Å—å, —á—Ç–æ –ø–æ—Ä—Ç—ã –æ—Ç–∫—Ä—ã—Ç—ã

### –ï—Å–ª–∏ WebRTC –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ TURN credentials –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä—å, —á—Ç–æ HTTPS –≤–∫–ª—é—á–µ–Ω

### –ï—Å–ª–∏ –≥–æ–ª–æ—Å –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. –ü—Ä–æ–≤–µ—Ä—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
2. –£–±–µ–¥–∏—Å—å, —á—Ç–æ TURN —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω
3. –ü—Ä–æ–≤–µ—Ä—å WebRTC —Å–æ—Å—Ç–æ—è–Ω–∏–µ

**–ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –≥–æ–ª–æ—Å–æ–≤–æ–π —á–∞—Ç –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å!** üéâ
