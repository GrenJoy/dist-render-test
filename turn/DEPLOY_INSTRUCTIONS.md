# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –¥–µ–ø–ª–æ—é TURN —Å–µ—Ä–≤–µ—Ä–∞ –Ω–∞ Render

## üö® –ü—Ä–æ–±–ª–µ–º–∞ —Ä–µ—à–µ–Ω–∞!

–ú—ã —Å–æ–∑–¥–∞–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ Dockerfile –¥–ª—è —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º—ã —Å `curl: command not found`.

## üìÅ –î–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã:

### 1. `Dockerfile.minimal` (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)
- ‚úÖ –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ curl
- ‚úÖ –ü—Ä–æ—Å—Ç–æ–π –∏ –Ω–∞–¥–µ–∂–Ω—ã–π
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ render.yaml

### 2. `Dockerfile.simple`
- ‚úÖ –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç curl, wget, dnsutils
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ IP
- ‚úÖ –ú–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å –Ω–∞ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

### 3. `Dockerfile.ultra-simple`
- ‚úÖ –ë–∞–∑–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç
- ‚úÖ –ú–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã —Å curl

## üöÄ –ö–∞–∫ –¥–µ–ø–ª–æ–∏—Ç—å:

### –®–∞–≥ 1: –í Render Dashboard
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –≤–∞—à TURN —Å–µ—Ä–≤–∏—Å `voice-chat-turn`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `Dockerfile.minimal`
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
TURN_USERNAME=voicechat
TURN_PASSWORD=turn123456
EXTERNAL_IP= (–æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)
```

### –®–∞–≥ 2: Manual Deploy
1. –ù–∞–∂–º–∏—Ç–µ "Manual Deploy"
2. –î–æ–∂–¥–∏—Ç–µ—Å—å –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —Å–±–æ—Ä–∫–∏
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏

### –®–∞–≥ 3: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã
–í –ª–æ–≥–∞—Ö –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å:
```
‚úÖ TURN_PASSWORD: [SET]
‚úÖ TURN_USERNAME: voicechat
‚úÖ EXTERNAL_IP not set or invalid, removing from config
‚úÖ TURN server started with PID: [—á–∏—Å–ª–æ]
```

## üîß –ß—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç:

1. **–°–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**
2. **–ï—Å–ª–∏ EXTERNAL_IP –Ω–µ –∑–∞–¥–∞–Ω - —É–±–∏—Ä–∞–µ—Ç –µ–≥–æ –∏–∑ –∫–æ–Ω—Ñ–∏–≥–∞**
3. **TURN —Å–µ—Ä–≤–µ—Ä —Å–∞–º –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç —Å–≤–æ–π IP**
4. **–ó–∞–º–µ–Ω—è–µ—Ç –ø–∞—Ä–æ–ª—å –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏**
5. **–ó–∞–ø—É—Å–∫–∞–µ—Ç TURN —Å–µ—Ä–≤–µ—Ä –∏ health check**

## ‚ùå –ï—Å–ª–∏ –≤—Å–µ –µ—â–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:

### –í–∞—Ä–∏–∞–Ω—Ç A: –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å EXTERNAL_IP –≤—Ä—É—á–Ω—É—é
1. –í Render Dashboard ‚Üí Environment Variables
2. –î–æ–±–∞–≤–∏—Ç—å: `EXTERNAL_IP=–≤–∞—à_—Ä–µ–∞–ª—å–Ω—ã–π_ip`
3. –ü–æ–ª—É—á–∏—Ç—å IP –º–æ–∂–Ω–æ —á–µ—Ä–µ–∑: https://whatismyipaddress.com/

### –í–∞—Ä–∏–∞–Ω—Ç B: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π Dockerfile
1. –ò–∑–º–µ–Ω–∏—Ç—å –≤ render.yaml:
```yaml
dockerfilePath: ./turn/Dockerfile.simple
```

### –í–∞—Ä–∏–∞–Ω—Ç C: –ü—Ä–æ—Å—Ç–æ–π –∑–∞–ø—É—Å–∫ –±–µ–∑ —Å–∫—Ä–∏–ø—Ç–∞
1. –ò–∑–º–µ–Ω–∏—Ç—å –≤ render.yaml:
```yaml
env: docker
dockerfilePath: ./turn/Dockerfile
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ TURN —Å–µ—Ä–≤–µ—Ä–∞
2. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ [WebRTC ICE trickle tool](https://webrtc.github.io/samples/src/content/peerconnection/trickle-ice/)
3. –í–≤–µ–¥–∏—Ç–µ: `turn:turn-dist.onrender.com:3478`
4. Username: `voicechat`, Password: `turn123456`

## üìû –ü–æ–¥–¥–µ—Ä–∂–∫–∞:

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã –æ—Å—Ç–∞—é—Ç—Å—è:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –≤ Render Dashboard
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 3478 –æ—Ç–∫—Ä—ã—Ç
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ TURN —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
4. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ fallback TURN —Å–µ—Ä–≤–µ—Ä—ã –≤ –∫–æ–¥–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
